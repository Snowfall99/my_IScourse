# 第五章 介质接入控制
## 广播信道分配的问题
- 用来决定广播信道中信道分配的功能及协议属于数据链路层的子层，称作介质接入控制MAC子层
- MAC子层是数据链路层的底层
- 静态分配
    - FDM、TDM
    - 每一个用户分配一个子信道
    - 较大延时，较多带宽浪费
- 动态分配
    - 不划分子信道，根据用户数据需求进行信道分配
    - 非固定使用信道资源：时隙、频段... 
    - ALOHA, slotted ALOHA，CSMA...
## 查询技术
- roll-call查询
- hub查询
- 自适应查询
    - 传统查询策略的缺点：
        - 在轻负载的情况下，效率较低
        - 在重负载的情况下，将引入较长的时延
    - 探查法的主要思想：
        1. 同时探查一组站点。如果其中某个站点需发送数据，则它反馈以某种形式的信号，否则，系统就认为整个该组站点都是空闲的，直至下一次探查
        1. 将具有反馈信号的站点组，分成两个子组，重复过程(1
        1. 对于最终的探查，由控制站发送给该站点的一个查询帧，使其可以发送数据
# 随机接入：ALOHA
- 纯ALOHA：
    - 当用户想要发送数据帧时，它就可以在任何时候发送。但是，不同用户发出的数据帧就有可能发生冲突。冲突的帧将被破坏，传输不成功，使吞吐量下降
    - 易受冲突时间：2T
    - 吞吐率$S=Ge^{-2G}$
- 分隙ALOHA
    - 在一个时隙内只产生一个新帧，新帧不允许立即发送，将在下一个时隙内的开始处$t+t_0$时发送，不会发生冲突
    - 在一个时隙内产生一个以上新帧，在下一个时隙的开始处$t+t_0$时，一个以上的帧同时发送，将发生冲突，即冲突危险区为t
    - 吞吐量$S=Ge^{-G}$
# 随机接入：CSMA
- 发送之前先侦听信道
- 非持续性CSMA：
    1. 如果此时信道空闲，则该站就可以向公共的信道上发送帧
    1. 如果此时信道处于忙状态，则它就停止侦听，并按某种解决冲突的方式重新调度它对帧的发送，典型的方法是延迟某一随机数值的时间段，然后在该延迟时间结束后再次侦听信道
    - 缺点：已侦听到的信道忙的站点在延迟时间没有结束之前，即使后来信道已经空闲，它们也不发送任何信息，因而限制了信道利用率的进一步提高
- p-持续CSMA
    - 在持续CSMA中，要发送帧的站始终侦听信道，直至信道由忙变为空，然后它就向公共信道上发送帧
    - 缺点：当有两个站都要发送帧时，一旦原来忙的信道变为空后，它们就立即同时发送各自的帧，从而发生冲突
    1. 如果站侦听到信道空闲，则它以概率p发出一个待发的帧，而以概率(1-p)延迟一个时隙，然后再侦听信道。如果此时信道忙，它就等到信道空闲并重复这一步骤
    1. 如在下一时隙中侦听到信道为空，则重复步骤(1)
- 1-持续CSMA
    - 只要发现信道空闲，就立即发送帧
- CSMA/CD
    - 在发送前进行载波侦听，而且在发送过程中也侦听是否发生冲突，并在检测到冲突后及时中断发送